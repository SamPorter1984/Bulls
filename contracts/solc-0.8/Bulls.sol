// SPDX-License-Identifier: MIT

//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@@@@&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//@&@@&&@@&@@&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//&&&&&&&&@&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//&&&&&&&&&&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//&&&&&&&&&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//&&&&&&&&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//&&&&&&&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//&&&&&&&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
//&&&&&&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&@@@@@@@
//&&&&&&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%/,,...*@@&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&&&&&&@
//&&&&&&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@(,......@@/@@@@@@@@@@@@@@@@@%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&&&&&&&
//&&&&&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*@@/.......%@/%@@@@@@@@@@@@@@@@(%@@@@&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&&&&&&&
//&&&&&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#@@@@@@@@@@@@@(,@@/......./@/,@@@@@@@@@@@@@@@@(/&@@@&%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&&&&&&&
//&&&&&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@/@@@@@@@@@@@%@..@@*......./@/,@@@@@@@@@@@@@@@@//*@@@@/@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&&&&&&&
//&&&&&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#/@@@@@@@@@@@##..@@*.......((/,%@@@@@@@@@@@@@@@//,,@@&/@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&&&&&&
//&&&&&@@@@@@@@@@@@@@@@@@@@@@@@@@#%@@//@@@@@@@@@@@#(..%@/.......#/*,%@@@@@@@@@@@@@@#/,,.&@%/&@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&&&&&&&
//&&&&&@@@@@@@@@@@@@@@@@@@@@@@@@@(/@@//&@@@@@@@@@@/#..*@/.......(/,.%@@@@@@@@@@@@@@/,,,,/@#/%##@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&&&&&&&
//&&&&&@@@@@@@@@@@@@@@@@@@@@@@@@@#/*@.,(@%//(&//*@,#...&(*.....,,/..&,@@%###%&@@@@(*.,,,,@*,,*,@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@&&&&&&&
//&&&&&@@@@@@@@@@@@@@@@@@@@@@@@@@#*/...#@@@@@@@@@@@@@@@@@#.,...,,,..#.&%/,*///**&@@@@@@@@@@@@@@%((**@@@@@@@@@@@@@@@@@@@@@@@@@@&&&&&&&
//&&&&&@@@@@@@@@@@@@@@@@@@@@@@@%@@/,....*..........................#..%,.....,..........(.,.,.......,#@@@@@@@@@@@@@@@@@@@@@@@@&&&&&&&
//&&&&&@@@@@@@@@@@@@@@@@@@@@@@@//%...............,/&*.............,...............,*//(*..,,,....,..,,.&@@@@@@@@@@@@@@@@@@@@@&&&&&&&&
//&&&&&@@@@@@@@@@@@@@@@@@@@@@@&//.......,(&&@@%#,.../&*..........................//#,....&@@@@@&%#*.,,.%&%@@@@@@@@@@@@@@@@@@@&&&&&&&&
//&&&&&&@@@@@@@@@@@@@@@@@@@@@@%/*...,@/&&&%&&%%%&,&/.,//........................./,..*@**@&%%&&%%@/@@,,.//%@@@@@@@@@@@@@@@@@&&&&&&&&&
//&&&&&%@@@@@@@@@@%@@@@@@@@@(@%/*,#@*.%&.,&&&&&&%%*.*..*........................,...,*.*&. %&&&@@%&/*@@%,,/&&@@@@@@@@@@@@@@@&&&&&&&&&
//&&&&&&@@@@@@@@@(/&@@@@@@@@//&/*,@,..#&@@&&&&&&%%# ...................................%%&@&&@&&&&&,.*@@,,*(**(@@@@@@@@*&@@@&&&&&&&&&
//&&&&&&&@@@@@@@@///&@@//@@&//*.*..... @%%%@&@&%&( .....................................&&%%&&&%%&*....,,,,/@@(*/@@@@@*&@@@&&&&&&&&%%
//&&&&&&%@@@@@@@@////@%*/*/@///.....#*,@,.&&&@( #(.....................................,,@,@&&@#  %*(%,.,,,/@@@@/**&**@@@@@%&&%&&&%%%
//&&&&&%&%@@@@@@@@///*//%//////,.........................................................,.........,...,,,*/@@@@@@**/@@@@@&&&&&&&&%%%
//&&&&%&%&&@@@@@@@@*/((/////*,/,........................................................................../(@@@&**&%**&@@@&&&&&&&&&%%
//&&%%%%%%%@@@@@@@@@///(/////............................................................................,/&@/**&@@@@//@@@&&&&&&&&&&&
//%%%%%%%%%&@@@@@@@@@/////%//*..........................................................................,/#**%@@@@@@@@@@@@&&&%%&&&&&&
//%%%%%%%%%%@@@@@@@@@@@@@@@&//,........................................,...............................,*//@@@@@@@@@@@@&@&&&&&&&&&&&&
//%%%%%%%%%%@&%@@@@@@@@@@@@@#//.......................................,/,............................,,,//(@@@@@@@@@@@@%&&&&&&&&&&&&%
//%%%%%%%%%%@%%&@@@@@@@@@@@@@(//......................................,//...........................,,,///#@@@@@@@@@@@%&&&&&&&&&&&%%%
//%%%%%%%%%%%%%%@@@@@@@@@@@@@@#/*.....................................,//*..........................,,,///@@@@@@@@@@@@%&&&&&&&&&&&%%%
//%%%%%%%%%%%%%%@@@@@@@@@@@@@@@&//....................................*///,.....................,,,,,,/(/@@@@@@@@@@@@&&&&&&&&&&%%&%%%
//%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@(/,.................................,/,.,....................,,,,,,,//#@@@@@@@@@@@@@&&&&%%&&%%%%%%%%
//%%%%%%%%%%%%%%@@@@@@@@@@@@@@@@@@@//.......................................................,,,,,,,,//@@@@@@@@@@@@@@@%&%%%%%%%%%%%%%%
//%%%%%%%%%%%%%&@%@@@@@@@@@@@@@@@@@@@//,......................(&#/*,,,*//#@/.............,,,,,,,,,*/@@@@@@@@@@@@@@@@&&&&&&&&&%%&%&&%&
//%%%%%%%%%%%%%&%&@@@@@@@@@@@@@@@@@@@@@#/,,,..........................................,,,,,,,,,,*/@@@@@@@@@@@@@@@@@@&&&&&&%&&%%%%%&&%
//%%%%%%%%%%%%&%%@@@@@@@@@@@@@@@@@@@@@@@@@(*..........................................,,,,,,,,/#@@@@@@@@@@@@@@@@@@@%%%%%%%%%%%#%%####
//((((((((((%((((@#((#((@@%%@@(%@@@@@@@@@///&/*,....................................,,,,,,,/(@@@@@@@@@@@@@@@@@@@@@@////////////////(/
//((((((((((((((#(((((((((#(@(((#@@@@@% ,.#@///&#,..........................,,,,,,,,,,,,*%@@@@@@@@@@@@@@@@@@@@@@@@%((((((((((((((((((
//*******************************@%%%%*  .,,.,&#///&(,.,,.,,,,..............,,,,,,,,,#@@@@@@@@&@@@@@@@@@@@@@@@@@@@*******/*******/***
//.............................(&%%%%@*    ,,,,,,,%&///&#*,,,,,,,,,,,,,,,,,,,,,,,%%//#@@@@@@@*/@@@@@@@@@@@@@@@@@@,,,............,,.,,
//......................... ,&&@%%%%%%%%&%   ,,,,,,,,,*&%//(&#*,,,,,,,,,,,.*%%(/////#(....&@@..@,.,%/,..@@@@@@@@#............,..,,.,,
//..................... %@%%&@%%%%%%%%%%%%%%& .,,,,,,,,,,,,.#@(////(((/(///////////#,....... .. .......#@@@@@@@@,,.............,,.,,,
//..................@&%%&&&&&@%%%%%%%%%%%%%%%%&% ,,,,,,,,,,,,,,,,,#&%#(///////////#....................@@@@@@@@/............,,.,,,,,,
//................@%%%&&&&&&&&&%%%%%%%%%%%%%%%%%%@.,,,,,,,,,,,,,,,,,,,,,,,/#&%(//%(,*%................,@@@@@@@&.,...,.,,,,.,,,,.,,,,,
//...............&%%%%&&&&&&&&&%%%%%%%%%%%%%%%%%%%%&(,,,,,,,,,,,,,,,,,,,,,,,,,,,,,*#&/,#/.............(@@@@@@@,,,..,,.,,,,.,,,.,,,,,,
//............../%%%%%%&&&&&&&&&%%%%%%%%%%%%%%%%%%%%%%&/,,,,,,,,,,,,,,,,,,,,,,,,,,,,,*,,/,#...........@@@@@@@,,,.,..,..,,,,,,,,,,,,,,
//.............,@%%%%%%%%&&&&&&&@%%%%%%%%%%%%%%%%%%%%%%%%@/,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,@,%,......,,*@@@@@@/,,.,......,,,,,,,,,,,,,,
//............,@%%%%%%%%%%&&&&&&&@&%%%%%%%%%%%%%%%%%%%%%%%%&&,,,,,,,,,,,,,,,,,,,,,,,,,,,,@,,#......,.@@@@@@/,,,,,,,,,,,,,,,,,,,,,,,,,
//....,..,,,,(&%%%%%%%%%%%%%&&&&&&&@%%%%%%%%%%%%%%%%%%%%%%%%%%&@,*,,,,,,,,,,,,,,,,,,,,,,,@/(%,.,.,,,/@@@@@/,,,,,,,,,,,,,,,,,,,,,,,,,,
//,.,...,,,.@%%%%%%%%%%%%%%%%&&&&&&&@&%%%%%%%%%%%%%%%%%%%%%%%&%&%&(,,,,,,,,,,,,,,,,,,,,,,@*,&/.,,,,,@@@@@,,,,,,,,,,,,,,,,,,,,,,,,,,,,
//,,,,,,,,(&%%%%%%%%%%%%%%%%%%%&&&&&&&@%%%%%%%%%%%%%%%%%%%%%%%%%%&%&@,,,,,,,,,,,,,..,,,,,&(,,@,.,,,/@@@@,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
//,,,,,,,@%%%%%%%%%%%%%%%%%%%%%%%&&&&&&&@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@(,,,,,,........,*,&&&@(%,,,,@@@(,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
//,,,,,#&%%%%%%%%%%%%%%%%%%%%%%%&&&&&&&&&@&&&&&&&%%&%%%%%%%%%%&&&&&&&%%%&%...............&&&&&&&@%@@&,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
pragma solidity ^0.8.17;

library Bulls {
    function packBooleans(bool[] memory bools) public pure returns (uint uintstore) {
        if (bools[0]) {
            uintstore += 1;
        }
        for (uint i = 1; i < bools.length; i++) {
            if (bools[i]) {
                uintstore += 2 ** i;
            }
        }
    }

    function extractBooleans(uint uintstore, uint i) public pure returns (bool[] memory) {
        bool[] memory bools = new bool[](i);
        uint half;
        unchecked {
            half = (2 ** i - 1) / 2;
        }
        while (i > 0) {
            --i;
            if (uintstore > half) {
                bools[i] = true;
                uintstore -= half + 1;
            }
            half /= 2;
        }
        return bools;
    }
}
